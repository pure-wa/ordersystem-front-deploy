{"ast":null,"code":"import { EventSourcePolyfill } from 'event-source-polyfill';\nimport { jwtDecode } from 'jwt-decode';\nexport default {\n  data() {\n    return {\n      userRole: null,\n      isLogined: false,\n      liveOrderCount: 0\n    };\n  },\n  created() {\n    const accessToken = localStorage.getItem(\"accessToken\");\n    if (accessToken) {\n      const payload = jwtDecode(accessToken);\n      this.userRole = payload.role;\n      this.isLogined = true;\n    }\n    // sse 연결 및 메세지 수신\n    if (this.userRole === 'ADMIN') {\n      // sse연결요청을 위한 event-source-polyfill라이브러리 사용\n      let sse = new EventSourcePolyfill(`${process.env.VUE_APP_API_BASE_URL}/sse/connect`, {\n        Header: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      });\n      sse.addEventListener('connect', event => {\n        console.log(e);\n      });\n    }\n  },\n  computed: {\n    TotalQuantitiy() {\n      return this.$store.getters.getTotalQuantity;\n    }\n  },\n  methods: {\n    doLogout() {\n      window.localStorage.clear(); // key로 삭제하기\n      // this.isLogined = false;\n      // this.$router.push(\"/\")\n      window.location.reload();\n      this.userRole = null;\n    }\n  }\n};","map":{"version":3,"names":["EventSourcePolyfill","jwtDecode","data","userRole","isLogined","liveOrderCount","created","accessToken","localStorage","getItem","payload","role","sse","process","env","VUE_APP_API_BASE_URL","Header","Authorization","addEventListener","event","console","log","e","computed","TotalQuantitiy","$store","getters","getTotalQuantity","methods","doLogout","window","clear","location","reload"],"sources":["/Users/purewa/Desktop/Pratice/Front_Pratice/vue-project/src/components/HeaderComponent.vue"],"sourcesContent":["<template>\n    <v-app-bar>\n        <v-container>\n            <v-row>\n                <!-- d-flex justify-start : 왼쪽 기준 정렬 -->\n                <v-col class=\"d-flex justify-start\">\n                    <div v-if=\"userRole==='ADMIN'\">\n                        <v-btn :to=\"'/member/list'\">회원관리</v-btn>\n                        <v-btn :to=\"'/product/manage'\">상품관리</v-btn>\n                        <v-btn :to=\"'/order/list'\">실시간 주문건수 {{ liveOrderCount }}</v-btn>\n                    </div>\n                </v-col>\n                <v-col class=\"text-center\">\n                    <v-btn to=\"'/'\">java shop</v-btn>\n                </v-col>\n                <v-col class=\"d-flex justify-end\">\n                    <v-btn v-if=\"isLogined\" :to=\"'/order/cart'\">장바구니{{ TotalQuantitiy }}</v-btn>\n                    <v-btn :to=\"'/product/list'\">상품목록</v-btn>\n                    <v-btn v-if=\"isLogined\" :to=\"'/member/mypage'\">마이페이지</v-btn>\n                    <v-btn v-if=\"!isLogined\" :to=\"'/member/create'\">회원가입</v-btn>\n                    <v-btn v-if=\"!isLogined\" :to=\"'/member/login'\">로그인</v-btn>\n                    <v-btn v-if=\"isLogined\" @click=\"doLogout()\">로그아웃</v-btn>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app-bar>\n</template>\n\n<script>\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { jwtDecode } from 'jwt-decode';\n\n    export default {\n        data() {\n            return {\n                userRole: null,\n                isLogined: false,\n                liveOrderCount : 0\n            }\n        },\n        created() {\n            const accessToken = localStorage.getItem(\"accessToken\");\n            if(accessToken) {\n                const payload = jwtDecode(accessToken);\n                this.userRole = payload.role;            \n                this.isLogined = true;\n            }\n            // sse 연결 및 메세지 수신\n            if(this.userRole ==='ADMIN'){\n                // sse연결요청을 위한 event-source-polyfill라이브러리 사용\n                let sse = new EventSourcePolyfill(`${process.env.VUE_APP_API_BASE_URL}/sse/connect`,{\n                    Header:{\n                        Authorization: `Bearer ${accessToken}`\n                    }\n                });\n                sse.addEventListener('connect',(event)=>{\n                    console.log(e)\n                })\n            }\n        },\n        computed: {\n            TotalQuantitiy(){\n                return this.$store.getters.getTotalQuantity;\n            \n            }\n        },\n        methods: {\n            doLogout() {\n                window.localStorage.clear(); // key로 삭제하기\n                // this.isLogined = false;\n                // this.$router.push(\"/\")\n                window.location.reload();\n                this.userRole = null;\n            }\n        }\n    }\n</script>"],"mappings":"AA6BA,SAASA,mBAAkB,QAAS,uBAAuB;AAC3D,SAASC,SAAQ,QAAS,YAAY;AAElC,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,IAAI;MACdC,SAAS,EAAE,KAAK;MAChBC,cAAa,EAAI;IACrB;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,MAAMC,WAAU,GAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IACvD,IAAGF,WAAW,EAAE;MACZ,MAAMG,OAAM,GAAIT,SAAS,CAACM,WAAW,CAAC;MACtC,IAAI,CAACJ,QAAO,GAAIO,OAAO,CAACC,IAAI;MAC5B,IAAI,CAACP,SAAQ,GAAI,IAAI;IACzB;IACA;IACA,IAAG,IAAI,CAACD,QAAO,KAAK,OAAO,EAAC;MACxB;MACA,IAAIS,GAAE,GAAI,IAAIZ,mBAAmB,CAAC,GAAGa,OAAO,CAACC,GAAG,CAACC,oBAAoB,cAAc,EAAC;QAChFC,MAAM,EAAC;UACHC,aAAa,EAAE,UAAUV,WAAW;QACxC;MACJ,CAAC,CAAC;MACFK,GAAG,CAACM,gBAAgB,CAAC,SAAS,EAAEC,KAAK,IAAG;QACpCC,OAAO,CAACC,GAAG,CAACC,CAAC;MACjB,CAAC;IACL;EACJ,CAAC;EACDC,QAAQ,EAAE;IACNC,cAAcA,CAAA,EAAE;MACZ,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,gBAAgB;IAE/C;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,QAAQA,CAAA,EAAG;MACPC,MAAM,CAACtB,YAAY,CAACuB,KAAK,CAAC,CAAC,EAAE;MAC7B;MACA;MACAD,MAAM,CAACE,QAAQ,CAACC,MAAM,CAAC,CAAC;MACxB,IAAI,CAAC9B,QAAO,GAAI,IAAI;IACxB;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}